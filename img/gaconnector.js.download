var gaconnector2=function(){function e(e,t){console.log(e);var n=new XMLHttpRequest;n.open("GET",e,!0),n.send()}function t(){var e=a("_ga"),t=window[window.GoogleAnalyticsObject];if("string"==typeof e&&e.length>0){var n=e.split(".");return n.slice(n.length-2,n.length).join(".")}if(void 0!==t&&void 0!==t.getAll){var o=t.getAll()[0];if(void 0!==o)return o.get("clientId")}}function n(){void 0===(_=t())&&setTimeout(n,500)}function o(e){var t=/[-\w]+\.(?:[-\w]+\.xn--[-\w]+|[-\w]{2,}|[-\w]+\.[-\w]{2})$/i,n=e.split("/")[2],o=t.exec(n);if("object"==typeof o&&o instanceof Array&&o.length>0)return o[0]}function r(e,t,n){n=365,console.log("setting cookie "+e);var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var a="expires="+r.toUTCString();document.cookie=e+"="+t+"; "+a+";domain=."+o(document.location.href)+";path=/"}function a(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}function i(e){console.log("deleting cookie "+e),r(e,"",0)}function c(e,t){t=void 0===t?document.location.search:t;try{var n=t.match("[?&]"+e+"=([^&]+)");if(n){var o=n[1];return o=o.replace(/\+/g,"%20"),o=decodeURIComponent(o)}return""}catch(e){return""}}function d(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function u(e){return e}function f(e,t){var n=u(e),o=u(t);-1===k.indexOf(e+"="+t)&&r("gaconnector_"+n,o)}function l(){for(var e={},t=document.cookie.split("; "),n=0;n<t.length;n++){var o=t[n].split("=")[0],r=t[n].split("=").slice(1).join("=");if(o.length>12&&"gaconnector_"==o.substring(0,12)){e[o.replace("gaconnector_","")]=r}}return e}function s(){var e=l();for(var t in x){var n=u(x[t]),o=e[n];""!==o&&void 0!==o&&(g(n,o),i("gaconnector_"+n))}}function g(t,n){if(-1===k.indexOf(t+"="+n)&&""!==R){var o="https://track.gaconnector.com/save_identifier";o+="?gaconnector_id="+R,o+="&account_id="+A,o+="&name="+t,o+="&value="+encodeURIComponent(n);e(o,function(){k.push(t+"="+n),i("gaconnector_"+t)})}}function v(e,t){f(e,t),g(e,t)}function m(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function h(){for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++)e[t].getAttribute("data-gaconnector-tracked")||-1===S.indexOf(e[t].type)&&(e[t].setAttribute("data-gaconnector-tracked",!0),e[t].onchange=function(e){if(m(e.target.value)){v("email",e.target.value)}else for(var t in O)for(var n=O[t],o=0;o<n.length;o++){var r=n[o];(r.test(e.target.name)||r.test(e.target.id))&&v(t,e.target.value)}})}function y(){var n="https://track.gaconnector.com/track_pageview";""!=document.location.search?(n+=document.location.search,n+="&"):n+="?",n+="gaconnector_id="+R,n+="&account_id="+A,n+="&referer="+encodeURIComponent(document.referrer),n+="&GA_Client_ID="+t(),e(n)}function p(){return self!==top}function b(){for(var e=document.querySelectorAll("iframe"),t=0;t<e.length;t++){var n=e[t].contentWindow,o={gaconnectorId:R,accountId:A};n.postMessage(o,"*")}}function w(e){"object"==typeof e.data&&void 0!==e.data.gaconnectorId&&(R=e.data.gaconnectorId,A=e.data.accountId,r("gaconnectorId",R,365))}function E(){p()?(console.log("Adding receiveGaConnectorId listener"),window.addEventListener("message",w,!1)):(console.log("Messaging child iframes"),b(),setInterval(b,1e3))}function I(e){var t=e.dataset.originalHref;void 0===t&&(e.dataset.originalHref=e.href,t=e.href);var n;return n=t.indexOf("?")>-1?"&":"?",e.href=t+n+"gaconnectorId="+R,e.href}function j(){for(var e=o(document.location.href),t=document.getElementsByTagName("a"),n=0;n<t.length;n++){var r=t[n],a=o(r.href);T.indexOf(a)>-1&&a!==e&&I(r)}}var _,A;n();var R=function(){var e=a("gaconnectorId"),t=c("gaconnectorId")||e||d();return t!==e&&r("gaconnectorId",t,365),t}(),k=[],x=["name","email","phone"],O={name:[/^name$/i,/^user.*name$/i],email:[/email/i],phone:[/phone/i]},S=["color","date","datetime-local","month","number","range","search","time","url","week"],T=null,L=function(){function e(){if(!r.isReady){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(e,1)}r.ready()}}var t,n,o={};o["[object Boolean]"]="boolean",o["[object Number]"]="number",o["[object String]"]="string",o["[object Function]"]="function",o["[object Array]"]="array",o["[object Date]"]="date",o["[object RegExp]"]="regexp",o["[object Object]"]="object";var r={isReady:!1,readyWait:1,holdReady:function(e){e?r.readyWait++:r.ready(!0)},ready:function(e){if(!0===e&&!--r.readyWait||!0!==e&&!r.isReady){if(!document.body)return setTimeout(r.ready,1);if(r.isReady=!0,!0!==e&&--r.readyWait>0)return;t.resolveWith(document,[r])}},bindReady:function(){if(!t){if(t=r._Deferred(),"complete"===document.readyState)return setTimeout(r.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",r.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",n),window.attachEvent("onload",r.ready);var o=!1;try{o=null==window.frameElement}catch(e){}document.documentElement.doScroll&&o&&e()}}},_Deferred:function(){var e,t,n,o=[],a={done:function(){if(!n){var t,i,c,d,u,f=arguments;for(e&&(u=e,e=0),t=0,i=f.length;t<i;t++)c=f[t],"array"===(d=r.type(c))?a.done.apply(a,c):"function"===d&&o.push(c);u&&a.resolveWith(u[0],u[1])}return this},resolveWith:function(r,a){if(!n&&!e&&!t){a=a||[],t=1;try{for(;o[0];)o.shift().apply(r,a)}finally{e=[r,a],t=0}}return this},resolve:function(){return a.resolveWith(this,arguments),this},isResolved:function(){return!(!t&&!e)},cancel:function(){return n=1,o=[],this}};return a},type:function(e){return null==e?String(e):o[Object.prototype.toString.call(e)]||"object"}};return document.addEventListener?n=function(){document.removeEventListener("DOMContentLoaded",n,!1),r.ready()}:document.attachEvent&&(n=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",n),r.ready())}),function(e){r.bindReady(),r.type(e),t.done(e)}}();return{track:function(e,t){A=e,void 0!==t&&void 0!==t.iframeEnabled&&!0!==t.iframeEnabled||E(),p()||y(),s(),L(function(e){h(),setInterval(h,1e3),void 0!==t&&void 0!==(T=t.internalDomains)&&(j(),setInterval(j,1e3))})},identify:v}}();